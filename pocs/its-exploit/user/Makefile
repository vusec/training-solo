CFLAGS = -g -O3 -Wno-unused-function -lrt -lm -no-pie -lpthread

ARCH = undef

COMMON = ../../../common

all: main
.PHONY: clean

main: main.c
	gcc -lm -o $@ main.c flush_and_reload.c cbpf.c branch_eviction.c collide_branch.c ${COMMON}/l2_eviction/evict_l2.c ${COMMON}/kaslr_prefetch/kaslr_prefetch.c $(CFLAGS) -D$(ARCH)

clean:
	rm -f main snippet.o

