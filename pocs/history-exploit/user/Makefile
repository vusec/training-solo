CFLAGS = -g -O3 -Wno-unused-function -lrt -lm -no-pie

ARCH = undef

COMMON = ../../../common

all: main
.PHONY: clean

main: main.c
	gcc -lm -o $@ main.c snippet.S flush_and_reload.c colliding_bhb.c cbpf.c ${COMMON}/l2_eviction/evict_l2.c ${COMMON}/kaslr_prefetch/kaslr_prefetch.c $(CFLAGS) -D$(ARCH)

clean:
	rm -f main snippet.o

